# Test Database Configuration - H2 in-memory
spring.datasource.url=jdbc:h2:mem:testdb;DB_CLOSE_DELAY=-1;DB_CLOSE_ON_EXIT=FALSE
spring.datasource.username=sa
spring.datasource.password=
spring.datasource.driver-class-name=org.h2.Driver

# JPA/Hibernate Configuration for Testing
spring.jpa.hibernate.ddl-auto=create-drop
spring.jpa.show-sql=false
spring.jpa.properties.hibernate.dialect=org.hibernate.dialect.H2Dialect
spring.jpa.properties.hibernate.format_sql=false
spring.jpa.open-in-view=false

# Disable Flyway for tests (use JPA schema generation)
spring.flyway.enabled=false

# Disable H2 Console for tests
spring.h2.console.enabled=false

# Thymeleaf Configuration for Testing
spring.thymeleaf.cache=false
spring.thymeleaf.prefix=classpath:/templates/
spring.thymeleaf.suffix=.html

# File Upload Configuration for Testing
spring.servlet.multipart.max-file-size=1MB
spring.servlet.multipart.max-request-size=1MB

# JWT Configuration for Testing
app.jwt.secret=testSecretKeyForJWTTokenGenerationThatIsLongEnoughForSecurity256Bits
app.jwt.expiration=3600000
app.jwt.refresh-expiration=7200000

# Upload Configuration for Testing
upload.path=target/test-uploads/products
file.upload-dir=target/test-uploads/categories
app.upload.news-images=target/test-uploads/news

# Logging Configuration for Testing
logging.level.com.dacsanviet=INFO
logging.level.org.springframework.security=WARN
logging.level.org.springframework.web=WARN
logging.level.org.hibernate.SQL=WARN
logging.pattern.console=%d{HH:mm:ss.SSS} [%thread] %-5level %logger{36} - %msg%n

# Disable WebSocket for tests
spring.websocket.sockjs.heartbeat.time=0

# Disable Email for tests
spring.mail.host=
spring.mail.port=
spring.mail.username=
spring.mail.password=

# Disable external services for tests
vnpay.tmn-code=TEST
vnpay.hash-secret=TEST
vnpay.url=http://localhost/test
vnpay.return-url=http://localhost/test
casso.api-key=TEST
casso.webhook.secret=TEST

# Encryption Configuration for Testing
app.encryption.key=testEncryptionKeyThatShouldBeUsedOnlyForTesting256Bits

# Cache Configuration for Testing
spring.cache.type=simple
spring.cache.cache-names=products,categories,news

# Database Connection Pool Configuration for Testing
spring.datasource.hikari.maximum-pool-size=5
spring.datasource.hikari.minimum-idle=1
spring.datasource.hikari.idle-timeout=30000
spring.datasource.hikari.pool-name=TestHikariCP
spring.datasource.hikari.max-lifetime=60000
spring.datasource.hikari.connection-timeout=5000

# JPA Performance Optimizations for Testing
spring.jpa.properties.hibernate.jdbc.batch_size=10
spring.jpa.properties.hibernate.order_inserts=true
spring.jpa.properties.hibernate.order_updates=true
spring.jpa.properties.hibernate.generate_statistics=false
spring.jpa.properties.hibernate.cache.use_second_level_cache=false
spring.jpa.properties.hibernate.cache.use_query_cache=false